# Basic setup and workflow {#intro}

![](https://img.shields.io/badge/document%20status-in%20progress-red?style=flat-square)

```{r, eval=TRUE, child="resources/preamble.Rmd"}
```

`r '<!-- '`

Day 1 morning: (10:15, lunch at 12:15 --- ~2 hrs)

- Slide? Motivation, why use these (short lecture?)
    - Question to them: For those that have doing data processing, 
    does it take up a lot of time? How much?
    - Intro to how limited code sharing is, research on it, etc.
    - First time running this intermediate course
        - So you are also the co-creators here, your feedback will improve this
        and we're collaborating together. You're learning, but also helping to
        improve the material and in how we teach you. What makes sense, what is
        confusing, and so on.

- project structure
    - Make tree of project as how it is and how it will look like?

Initial project structure:

```
LearnR3
├── data
│   └── README.md
├── doc
│   └── README.md
├── R
│   └── README.md
├── .Rbuildignore
├── .gitignore
├── DESCRIPTION
├── LearnR3.Rproj
├── README.md
└── TODO.md
```

At end of this workshop:

```
LearnR3
├── data
│   ├── README.md
│   └── mmash.rda
├── data-raw
│   ├── mmash-data.zip
│   ├── mmash
│   │  ├── user_1
│   │  ├── ...
│   │  └── user_22
│   └── mmash.R
├── doc
│   ├── README.md
│   ├── lesson.html
│   └── lesson.Rmd
├── R
│   ├── README.md
│   └── functions.R
├── .Rbuildignore
├── .gitignore
├── DESCRIPTION
├── LearnR3.Rproj
└── README.md
```

When referring to folders, end in `/`, e.g. `data/` or `doc/`.

```{r}
DiagrammeR::grViz("
digraph {
    # Styling
    graph [compound = true, nodesep = .1, ranksep = .1, rankdir = TB]
    node [shape = rectangle, style = filled, color = lightblue]
    
    # Nodes
    mmash_dir [label = 'data-raw/mmash/']
    mmash_dir_2 [label = 'data-raw/mmash/']
    mmash_dir_3 [label = 'data-raw/mmash/']
    mmash_r [label = 'data-raw/mmash.R']
    mmash_r_2 [label = 'data-raw/mmash.R']
    mmash_zip [label = 'data-raw/MMASH.zip']
    rmd [label = 'doc/lesson.Rmd']
    rmd_2 [label = 'doc/lesson.Rmd']
    html [label = 'doc/lesson.html']
    fn_r [label = 'R/functions.R']
    fn_r_2 [label = 'R/functions.R']
    make_fn [label = 'Create function']
    mmash_rda [label = 'data/mmash.rda']
    mmash_rda_2 [label = 'data/mmash.rda']
    
    subgraph cluster0 {
        graph [label = 'Download\nraw data']
        mmash_r -> mmash_dir
        mmash_r -> mmash_zip [arrowhead = none]
        mmash_zip -> mmash_dir
    }
    
    subgraph cluster1 {
        graph [label = 'Workflow\n ']
        make_fn -> fn_r [label = 'cut & paste\ncommit']
        rmd -> make_fn [len = 2, label = '   ']
        make_fn -> rmd [len = 2, label = '   ']
        fn_r -> rmd [label = '   load']
        mmash_dir_2 -> rmd [label = '  import']
    }
    
    subgraph cluster2 {
        graph [label = 'Create\nfinal data'] 
        mmash_dir_3 -> mmash_rda
        fn_r_2 -> mmash_r_2 [label = '   load']
        mmash_r_2 -> mmash_dir_3 [arrowhead = none]
        mmash_r_2 -> mmash_rda
    }
    
    subgraph cluster3 {
        graph [label = 'Work with\nfinal data'] 
        mmash_rda_2 -> rmd_2 [label = '  import']
        rmd_2 -> html [label = '  knit']
    }
    
}")
```


go over basic workflow how we will do things in the course

- Create Rmd file.
- Git commit this file.
- Make edits, test out functions, code until it works.
- Move code into own R script, run it there.
- Git commit at this point.
- Making functions, create until it works, then move into own file
- Source that file and replace with new function in rmd file
- Git commit at this point.

- Using R Markdown as development tool
- Incorporate using Git in the code along session.

- Talk about devtools::load_all()?

## Project setup

- Delete TODO.md, setup and fetch_data files
- Fill in README a bit?

-outline:
    - import
    - create functions for importing
        - load_all
    - functional programming: functionals and vectorization
        - multiple files with vroom
    - wrangling (for larger datasets and e.g. summarizing)
        - joins
        - reduce (FP)
        - group_by and summarize (FP)
        - selecting
        - rename_with (snakecase::to_snake_case) (FP)
        - converting to/updating existing functions
    - more on functions
        - debugging (print, stop)
        - using with tidyverse
    - saving data and summarizing final
        - load_all
        - across, where, tidyselect helpers
    

`r '-->'`
